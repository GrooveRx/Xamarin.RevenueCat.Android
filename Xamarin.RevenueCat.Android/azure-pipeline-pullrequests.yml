pr:
  - master

pool:
  vmImage: 'macOS-10.15'

steps:

- bash: |
    echo "##vso[build.updatebuildnumber]pullrequests-xamarin-revenuecat-android-$(Build.SourceBranchName)-$(Build.BuildId)"

- bash: |
    cd Xamarin.RevenueCat.Android
    msbuild /t:Restore /p:Configuration=Release
    msbuild /t:Build /p:Configuration=Release
    msbuild /t:Pack /p:Configuration=Release

- task: XamarinAndroid@1
  inputs:
    projectFile: 'Xamarin.RevenueCat.Android/Xamarin.RevenueCat.Android.csproj'
    msbuildArchitectureOption: 'x64'
    jdkOption: 'JDKVersion'
